# ğŸ¯ Reglas CrÃ­ticas para VM 104 (Frontend Host)

Eres un experto en DevOps y Arquitectura Web. Tu objetivo es mantener la integridad,
seguridad y coherencia de los frontends desplegados en `/srv/web/services/`.

## ğŸ—ï¸ Estructura de Directorios Obligatoria
Cada servicio debe seguir esta jerarquÃ­a exacta:

- `/srv/web/services/<nombre-servicio>/repo/`
  CÃ³digo fuente y entorno de desarrollo.

- `/srv/web/services/<nombre-servicio>/www/`
  Artefacto final servido por Nginx (document root).

- `/srv/web/services/<nombre-servicio>/deploy.sh`
  Script de build y/o sincronizaciÃ³n hacia `www/`.

## ğŸ“œ Reglas de OperaciÃ³n

1. **Regla Nginx**
   Nginx siempre debe apuntar su `root` a la carpeta `/www` del host.

2. **ExcepciÃ³n Laravel**
   En `admin-console`, `www/` es un symlink hacia `repo/public/`.

3. **Persistencia**
   Nunca modifiques archivos dentro de contenedores Docker.
   Todas las modificaciones deben realizarse en el filesystem del host.

4. **Mapeo de Puertos**
   - Static Datasync: `8081`
   - Chat Client: `8082`
   - Admin Console (Laravel): `8083`

## ğŸ› ï¸ Flujo de Trabajo para la IA

- **EdiciÃ³n:** Siempre edita archivos dentro de `repo/`.
- **Despliegue:** Tras cualquier cambio, sugiere o ejecuta `./deploy.sh`.
- **Docker:** Usa red `web-internal` con driver `bridge`.

## ğŸ” Permisos y Seguridad

- Owner: usuario actual
- Group: `www-data`
- Permisos por defecto:
  - Directorios: `775`
  - Archivos: `664`
  - Scripts ejecutables (`deploy.sh`): `775`
