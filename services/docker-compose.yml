version: "3.9"

services:
  prd-web-static-datasyncsa-01:
    image: nginx:alpine
    container_name: prd-web-static-datasyncsa-01
    restart: unless-stopped
    ports:
      - "8081:80"
    volumes:
      - /srv/web/services/datasyncsa/www:/usr/share/nginx/html:ro
    networks:
      - web-internal

  prd-web-chat-client-01:
    image: nginx:alpine
    container_name: prd-web-chat-client-01
    restart: unless-stopped
    ports:
      - "8082:80"
    volumes:
      - /srv/web/services/chat-client/www:/usr/share/nginx/html:ro
    networks:
      - web-internal

  prd-web-admin-nginx-01:
    image: nginx:alpine
    container_name: prd-web-admin-nginx-01
    restart: unless-stopped
    ports:
      - "8083:80"
    volumes:
      - /srv/web/services/admin-console/www:/var/www/public:ro
      - /srv/web/services/admin-console/nginx/default.conf:/etc/nginx/conf.d/default.conf:ro
    depends_on:
      - prd-web-admin-php-01
    networks:
      - web-internal

  prd-web-admin-php-01:
    image: php:8.3-fpm
    container_name: prd-web-admin-php-01
    restart: unless-stopped
    volumes:
      - /srv/web/services/admin-console/repo:/var/www
      - /srv/web/services/admin-console/.env:/var/www/.env
    networks:
      - web-internal

networks:
  web-internal:
    driver: bridge
